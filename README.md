# Bookcrossing API

Кратко: серверная часть сервиса обмена книгами между пользователями. Функциональность и используемые технологии ниже основаны на анализе тестового файла test/service_test.go.

- Идея проекта: p2p‑платформа, где пользователи обмениваются книгами, оставляют отзывы и управляют заявками на обмен.

## Технологии (по содержимому test/service_test.go)

- Go (стандартная библиотека): testing, io, log/slog
- Testify: assert, require, mock — удобные ассерты и мок‑объекты для юнит‑тестирования
- GORM (gorm.Model) — модельные структуры с базовыми полями (ID, timestamps)
- Архитектура слоёв:
  - `internal/services/*` — бизнес‑логика
  - `mocks/*` — мок‑репозитории и мок‑сервисы для тестов
  - `internal/models/*` — доменные модели (User, Book, Genre, Review, Exchange)
  - `internal/dto/*` — DTO для запросов/ответов

## Возможности (выведены из тестов)

- Пользователи:
  - `GetUserByID`, `UpdateUser`, `DeleteUser`
  - `GetUserExchanges(status)` — заявки на обмен по статусу
- Книги:
  - Создание, получение по ID, обновление, удаление
  - Поиск `SearchBooks(query)` с пагинацией/сортировкой
  - `GetByUserID(status)`, `GetAvailableBooks(city)`
- Жанры:
  - Создание жанра, получение по ID
- Отзывы:
  - Создание, получение по пользователю и по книге, удаление (проверка авторства)
- Обмены:
  - Создание заявки, принятие, отмена, завершение
  - Получение по ID, получение всех заявок

## Быстрый старт (тесты)

- Установить зависимости модулей:
  - go mod download
- Запустить юнит‑тесты:
  - go test ./...

## Структура (релевантная тестам)

- test/service_test.go — сценарии юнит‑тестов сервисного слоя
- mocks/\* — мок‑реализации репозиториев/сервисов
- internal/services/\* — методы бизнес‑логики, которые покрываются тестами
- internal/models/_, internal/dto/_ — типы данных, используемые в тестах
